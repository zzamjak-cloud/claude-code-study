# Workspace 설정 가이드

## 🎯 빠른 설정 (3단계)

TeamScheduler는 이제 **고정 workspace ID**를 사용하여 모든 팀원이 같은 데이터를 공유합니다.

---

## 1단계: 최고 관리자 설정

### ✅ 자동 설정 (권장)

**가장 먼저 로그인한 사람이 자동으로 최고 관리자가 됩니다!**

1. 최고 관리자가 될 사람이 첫 번째로 로그인
2. Firestore에 workspace가 자동 생성됨
3. 해당 사용자의 UID가 `ownerId`로 자동 설정됨

**확인 방법**:
```
Firebase Console → Firestore Database → workspaces/default-workspace
  - ownerId: "abc123..." (첫 로그인 사용자의 UID)
```

---

### 🔧 수동 변경 (필요한 경우)

만약 다른 사람을 최고 관리자로 변경하려면:

1. Firebase Console → Authentication → Users
2. 새로운 관리자의 UID 복사
3. Firebase Console → Firestore Database
4. `workspaces/default-workspace` 문서 선택
5. `ownerId` 필드를 새로운 UID로 변경
6. 저장

---

## 2단계: 팀원 등록

최고 관리자가 로그인 후:

1. 관리 패널 (⚙️ 버튼) 클릭
2. "팀원 관리" 탭 선택
3. "구성원 추가" 버튼 클릭
4. 팀원 정보 입력:
   - **이름**: 팀원 이름
   - **이메일**: 🔴 **필수!** Google 로그인에 사용할 이메일
   - **직군**: 기획/개발/디자인 등
   - **역할**: 담당 업무
   - **리더**: 서브 관리자로 지정할 경우 체크

> ⚠️ **중요**: 이메일을 정확히 입력해야 로그인 가능합니다!

---

## 3단계: 팀원 로그인

1. 각 팀원이 배포된 URL 접속
2. "Google 로그인" 클릭
3. **팀원 정보에 등록된 이메일**로 로그인
4. 자동으로 권한 부여 및 접근 허용

---

## 🔐 권한 체크 흐름

```
사용자 로그인 (Google)
    ↓
이메일 확인
    ↓
팀원 목록에서 이메일 매칭
    ↓
매칭 성공?
    ├─ ✅ Yes → 앱 접근 허용
    └─ ❌ No  → "접근 권한 없음" 화면 표시
```

---

## 🚨 문제 해결

### 문제 1: "접근 권한 없음" 화면이 나옴

**원인**:
- 로그인한 이메일이 팀원 목록에 없음
- 팀원 정보에 이메일이 누락됨

**해결**:
1. 관리자에게 연락
2. 관리자가 팀원 정보에 올바른 이메일 추가
3. 재로그인

---

### 문제 2: 최고 관리자가 아닌데 관리 버튼이 보임

**원인**:
- Firestore의 `workspace.ownerId`가 잘못 설정됨

**해결**:
1. Firebase Console → Firestore
2. `workspaces/default-workspace` 확인
3. `ownerId` 필드를 올바른 UID로 수정

---

### 문제 3: 다른 팀원의 데이터가 안 보임

**원인**:
- `.env` 파일의 `VITE_WORKSPACE_ID`가 다름

**해결**:
1. 모든 팀원이 같은 workspace ID 사용 확인
2. `.env` 파일 통일
3. 재배포

---

## 📊 권한 요약

| 역할 | 자동 설정 조건 | 권한 |
|------|--------------|------|
| **Owner** | 첫 로그인 사용자 | 모든 권한 (팀원/프로젝트/공지 관리) |
| **Admin** | `isLeader = true` | 일정 관리, 제한적 관리 기능 |
| **Member** | 이메일 매칭 | 일정 조회/생성/수정 |
| **Guest** | 이메일 매칭 실패 | 접근 거부 |

---

## 💡 환경 변수 (선택사항)

### Workspace ID 커스터마이징

기본값 `default-workspace` 대신 다른 ID를 사용하려면:

**`.env` 파일**:
```env
VITE_WORKSPACE_ID=my-company-2025
```

**주의**:
- 모든 팀원이 같은 값 사용 필요
- 변경 후 재배포 필요
- 이미 데이터가 있으면 마이그레이션 필요

---

## ✅ 체크리스트

배포 후 확인사항:

- [ ] 최고 관리자 계정 로그인 성공
- [ ] Firestore에 workspace 문서 생성 확인
- [ ] 관리 패널에서 팀원 등록
- [ ] 각 팀원 정보에 이메일 입력 확인
- [ ] 팀원들이 등록된 이메일로 로그인 가능
- [ ] 권한별 기능 접근 확인
  - Owner: 모든 기능 접근 가능
  - Admin: 제한적 관리 기능 접근
  - Member: 일정 생성/수정 가능

---

## 📚 관련 문서

- **DEPLOYMENT.md** - 배포 가이드
- **SECURITY.md** - 보안 시스템 상세 가이드
- **.env.example** - 환경 변수 예시

---

**🎉 설정 완료! 이제 팀원들과 함께 일정을 관리하세요!**
